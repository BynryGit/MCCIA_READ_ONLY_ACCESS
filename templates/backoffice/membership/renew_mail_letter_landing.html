<!DOCTYPE html>
<html lang="en">
{% load my_template_tag %}
{% load staticfiles %}
<head>
    <meta charset="utf-8"/>
    <title>MCCIA | Membership Renewal Configuration</title>

    {% include 'backoffice/base_css.html' %}
    <link href="{% static 'backoffice/assets/global/plugins/bootstrap-wysihtml5/bootstrap-wysihtml5.css' %}"
          rel="stylesheet" type="text/css"/>
    <link href="{% static 'backoffice/assets/global/plugins/bootstrap-markdown/css/bootstrap-markdown.min.css' %}"
          rel="stylesheet" type="text/css"/>
    <link href="{% static 'backoffice/assets/global/plugins/bootstrap-summernote/summernote.css' %}" rel="stylesheet"
          type="text/css"/>
    <link rel="shortcut icon" href="favicon.ico" />


</head>
<style type="text/css">
$('#summernote').summernote({
  toolbar: [
    // [groupName, [list of button]]
    ['style', ['bold', 'italic', 'underline', 'clear']],
    ['font', ['strikethrough', 'superscript', 'subscript']],
    ['fontsize', ['fontsize']],
    ['color', ['color']],
    ['para', ['ul', 'ol', 'paragraph']],
    ['height', ['height']]
  ]
});
</style>

<body class="page-header-fixed page-sidebar-closed-hide-logo page-container-bg-solid ">

<!-- BEGIN HEADER -->

<div class="clearfix"></div>
<div class="page-container">
    <div class="page-sidebar-wrapper">
        <div class="page-sidebar navbar-collapse collapse">
            {% include 'backoffice/membership/side-panel.html' %}
        </div>
    </div>
    <!-- END SIDEBAR -->
    <!-- BEGIN CONTENT -->
    <div class="page-content-wrapper">
        <!-- BEGIN CONTENT BODY -->
        <div class="page-content">
            <!-- END PAGE HEADER-->
            <div class="row">
                <div class="col-lg-12">
                    <div class="portlet light">
                        <div class="portlet-body form">
                            <div class="page-bar">
                                <ul class="page-breadcrumb">
                                    <li>
                                        <a href="/backofficeapp/backoffice/" style="color: #3eb199;font-size: 16px;">Membership</a>
                                        <i class="fa fa-angle-right"></i>
                                    </li>
                                    <li>
                                        <a href="/backofficeapp/renewal-config-landing/"
                                           style="color: #3eb199;font-size: 16px;">Renewal Configuration</a>
                                        <i class="fa fa-angle-right"></i>
                                    </li>
                                    <li>
                                        <span style="color: #00448b;font-size: 16px;">Update Renewal Letter</span>
                                    </li>
                                </ul>
                            </div>
                            <!-- BEGIN FORM-->
                            <div class="row" id="main_div">
                                <div class="col-sm-12">
                                    <div class="portlet light profile-sidebar-portlet bordered">
                                        <div class="row">
                                            <div class="col-xs-12">
                                                {% csrf_token %}
                                                <form id="update_renew_mail_letter" role="form"
                                                      enctype="multipart/form-data"
                                                      name="update_renew_mail_letter" method="POST">
                                                    <div class="portlet-body form show_error " id="error_summernote_1">
                                                            {{renew_object_text}}
                                                            <label class="control-label col-md-2 bold">Renewal
                                                                Letter</label>
                                                            <br>
                                                            <form class="form-horizontal form-bordered">
                                                                <div class="form-body">
                                                                    <div class="form-group last">
                                                                        <div class="col-md-12">
                                                                            <div class="summernote"
                                                                                 id="summernote_1"></div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </form>
                                                        </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xs-12 text-right">
                                    <button type="button" class="btn btn-outline grey_color "
                                            onclick="location.href = '/backofficeapp/renewal-config-landing/'">Cancel
                                    </button>
                                    <input type="submit" class="btn btn-outline done_btn"
                                           onclick="save_renew_letter_text()" id="submit_letter" value="Save">
                                    <input type="hidden" id="renew_letter_id" value="renew_letter_id"
                                           onchange="get_renew_letter_detail()">

                                </div>
                            </div>
                            <!-- END PORTLET-->
                        </div>
                    </div>
                </div>
                <!-- END CONTENT BODY -->
            </div>
            <!-- END CONTENT -->
        </div>
    </div>
</div>

<!-- END CONTAINER -->

<!-- BEGIN FOOTER -->
<div class="page-footer">
    <div class="page-footer-inner"> 2018 Â© Bynry Technologies
    </div>
    <div class="scroll-to-top">
        <i class="icon-arrow-up"></i>
    </div>
</div>
<!-- END FOOTER -->


<!-- END CONTAINER -->

<!--[if lt IE 9]>

<![endif]-->
<!-- BEGIN CORE PLUGINS -->
<!-- BEGIN CORE PLUGINS -->
        <script src="{% static 'backoffice/assets/global/plugins/jquery.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'backoffice/assets/global/plugins/bootstrap/js/bootstrap.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'backoffice/assets/global/plugins/js.cookie.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'backoffice/assets/global/plugins/bootstrap-hover-dropdown/bootstrap-hover-dropdown.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'backoffice/assets/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'backoffice/assets/global/plugins/jquery.blockui.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'backoffice/assets/global/plugins/uniform/jquery.uniform.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'backoffice/assets/global/plugins/bootstrap-switch/js/bootstrap-switch.min.js' %}" type="text/javascript"></script>
        <!-- END CORE PLUGINS -->
        <!-- BEGIN PAGE LEVEL PLUGINS -->
        <script src="{% static 'backoffice/assets/global/plugins/bootstrap-wysihtml5/wysihtml5-0.3.0.js' %}" type="text/javascript"></script>
        <script src="{% static 'backoffice/assets/global/plugins/bootstrap-wysihtml5/bootstrap-wysihtml5.js' %}" type="text/javascript"></script>
        <script src="{% static 'backoffice/assets/global/plugins/bootstrap-markdown/lib/markdown.js' %}" type="text/javascript"></script>
        <script src="{% static 'backoffice/assets/global/plugins/bootstrap-markdown/js/bootstrap-markdown.js' %}" type="text/javascript"></script>
        <script src="{% static 'backoffice/assets/global/plugins/bootstrap-summernote/summernote.min.js' %}" type="text/javascript"></script>
        <!-- END PAGE LEVEL PLUGINS -->
        <!-- BEGIN THEME GLOBAL SCRIPTS -->
        <script src="{% static 'backoffice/assets/global/scripts/app.min.js' %}" type="text/javascript"></script>
        <!-- END THEME GLOBAL SCRIPTS -->
        <!-- BEGIN PAGE LEVEL SCRIPTS -->
        <script src="{% static 'backoffice/assets/pages/scripts/components-editors.min.js' %}" type="text/javascript"></script>
        <!-- END PAGE LEVEL SCRIPTS -->
        <!-- BEGIN THEME LAYOUT SCRIPTS -->
        <script src="{% static 'backoffice/assets/layouts/layout/scripts/layout.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'backoffice/assets/layouts/layout/scripts/demo.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'backoffice/assets/layouts/global/scripts/quick-sidebar.min.js' %}" type="text/javascript"></script>

        <script src="{% static 'backoffice/assets/pages/scripts/dropzone1.js' %}"></script>
        <script src="{% static 'backoffice/assets/global/plugins/select2/js/select2.full.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'backoffice/assets/pages/scripts/components-select2.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'backoffice/assets/global/plugins/moment.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'backoffice/assets/global/plugins/bootstrap-daterangepicker/daterangepicker.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'backoffice/assets/global/plugins/bootstrap-datepicker/js/bootstrap-datepicker.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'backoffice/assets/global/plugins/bootstrap-timepicker/js/bootstrap-timepicker.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'backoffice/assets/global/plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'backoffice/assets/global/plugins/clockface/js/clockface.js' %}" type="text/javascript"></script>
        <script src="{% static 'backoffice/assets/pages/scripts/components-date-time-pickers.min.js' %}" type="text/javascript"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/js/bootstrap-datepicker.min.js"></script>
        <script src="{% static 'custom-js/bootbox.min.js' %}" type="text/javascript"></script>
        <script src="https://maps.google.com/maps/api/js?libraries=geometry&v=3.22&key=AIzaSyDV7B5iJWyOQq-OyNuVR1VcarXPz3yL6Y8"></script>
        <script src="{% static 'custom-js/backofficeapp/events/maplace.min.js' %}" type="text/javascript"></script>


<script type="text/javascript">
$(document).ready(function(){
     $.ajax({
             type: 'GET',
             url: '/backofficeapp/get-renew-letter-details/',
             success: function (response) {
             if (response.success == 'true') {
                 $('#summernote_1').code(response.renew_object_text);
               }
             },
             error: function (response) {
                 alert("Error!");
             },
         });

});


function save_renew_letter_text(){
  var formData= new FormData();
  formData.append("renew_letter_detail",$('#summernote_1').code());
    $.ajax({
        type:'POST',
        url:'/backofficeapp/save-renew-letter-text/',
        data:formData,
        cache: false,
        processData: false,
        contentType: false,
        success: function(response) {
            if (response.success == "true") {
                bootbox.alert("<span class='center-block text-center'> Renewal Letter Updated Successfully</span>");
            }
        },
        error:function (response){
            bootbox.alert("<span class='center-block text-center'>Data is not Stored. Please enter valid data.</span>");
        },
        beforeSend: function() {
        $('#processing').show();
        },
        complete: function() {
        $('#processing').hide();
        }
    });
 }
</script>
</body>
</html>