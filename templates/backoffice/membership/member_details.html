<!DOCTYPE html>

<html lang="en">

<!-- BEGIN HEAD -->
{% load staticfiles %}
<head>
    <meta charset="utf-8"/>
    <title>MCCIA | Members Details </title>
    {% include 'backoffice/base_css.html' %}
</head>
<!-- END HEAD -->


<style type="text/css">
.custom-date-size {
    min-width: 105%;
}

tr td{
    width:1%;
    white-space:nowrap;    
}


</style>

<body class="page-header-fixed page-sidebar-closed-hide-logo page-container-bg-solid">
<!-- BEGIN HEADER -->
<div id="processing" style="display:none;">
    <div id="loading">
        <img src="{% static 'assets/loading-bars.gif' %}" style="height : 100px;">

    </div>
</div>
<!-- BEGIN HEADER -->
<div class="page-header navbar navbar-fixed-top">
    <!-- BEGIN HEADER INNER -->
    <div class="page-header-inner ">
        <!-- BEGIN LOGO -->
        <div class="page-logo">
            <a href="index.html">
                <img src="{% static 'assets/MCCIA-logo.png' %}" alt="logo"
                     class="logo-default"/> </a>

            <div class="menu-toggler sidebar-toggler" id="toggle_menu_bar">
                <!-- DOC: Remove the above "hide" to enable the sidebar toggler button on header -->
            </div>
        </div>
        <!-- END LOGO -->
        <!-- BEGIN RESPONSIVE MENU TOGGLER -->
        <a href="javascript:;" class="menu-toggler responsive-toggler" data-toggle="collapse"
           data-target=".navbar-collapse"> </a>
        <!-- END RESPONSIVE MENU TOGGLER -->
        <!-- BEGIN PAGE TOP -->
        <div class="page-top">
            <!-- BEGIN TOP NAVIGATION MENU -->
            <div class="top-menu">
                <ul class="nav navbar-nav pull-right">
                    <li class="dropdown dropdown-user">
                        <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown"
                           data-close-others="true">
                            <!-- <img alt="" class="img-circle" src="{% static 'assets/layouts/layout2/img/avatar3_small.jpg" /> -->
                            <span class="username username-hide-on-mobile"> {{ request.session.login_user }} </span>
                            <i class="fa fa-angle-down"></i>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-default">
                            <li>
                                <a href="/edit-profile/?user_id={{request.session.login_user}}">
                                    <i class="fa fa-user" aria-hidden="true"></i> My Profile </a>
                            </li>
                            <li>
                                <a href="/log-out/">
                                    <i class="icon-key"></i> Log Out </a>
                            </li>
                        </ul>
                    </li>
                    <!-- END USER LOGIN DROPDOWN -->
                </ul>
            </div>
            <!-- END TOP NAVIGATION MENU -->
        </div>
        <!-- END PAGE TOP -->
    </div>
    <!-- END HEADER INNER -->
</div>
<!-- END HEADER -->

<!-- BEGIN HEADER & CONTENT DIVIDER -->
<div class="clearfix"></div>
<!-- END HEADER & CONTENT DIVIDER -->


<!-- BEGIN CONTAINER -->
<div class="page-container">
    <!-- BEGIN SIDEBAR -->
    <div class="page-sidebar-wrapper">
        <div class="page-sidebar navbar-collapse collapse">
            {% include 'backoffice/membership/side-panel.html' %}
        </div>
    </div>
    <!-- END SIDEBAR -->


    <!-- BEGIN CONTENT -->
    <div class="page-content-wrapper">
        <!-- BEGIN CONTENT BODY -->
        <div class="page-content">
            <div class="row">
                <div class="col-lg-12">
                    <div class="portlet light  ">

                        <div class="page-bar">
                            <ul class="page-breadcrumb">
                                <li>
                                    <a href="/backofficeapp/backoffice/" style="color: #3eb199;font-size: 16px;">Membership</a>
                                        <i class="fa fa-angle-right"></i>
                                </li>
                                <li>
                                    <span style="color: #00448b;font-size: 16px;">Members Details</span>
                                </li>
                            </ul>
                        </div>

                        <div class="row" style="display: none;">
                            <div class="col-lg-2">
                                <span>Business Nature</span>
                                <select id="business_nature" class="form-control select2">
                                    <option style="font-size: 14px" value="show_all">Show All</option>
                                    {% for item in category_list %}
                                        <option value="{{item.id}}">{{item.membership_category}}</option>
                                    {% endfor %}
                                </select>
                            </div>

                            <div class="col-lg-2">
                                <span>ISO</span>
                                <select id="iso" class="form-control select2">
                                    <option style="font-size: 14px" value="show_all">Show All</option>
                                    <option style="font-size: 14px" value="True">Yes</option>
                                    <option style="font-size: 14px" value="False">No</option>
                                </select>
                            </div>

                            <div class="col-lg-2">
                                <span>Scale</span>
                                <select id="scale" class="form-control select2">
                                    <option style="font-size: 14px" value="show_all">Show All</option>
                                    <option value="MR">Micro</option>
                                    <option value="SM">Small</option>
                                    <option value="MD">Medium Scale</option>
                                    <option value="LR">Large Scale</option>
                                </select>
                            </div>

                            <div class="col-lg-2">
                                <span>State</span>
                                <select id="state" class="form-control select2">
                                    <option style="font-size: 14px" value="show_all">Show All</option>
                                    {% for item in state_list %}
                                        <option value="{{item.id}}">{{item.state_name}}</option>
                                    {% endfor %}
                                </select>
                            </div>

                            <div class="col-lg-2">
                                <span>City</span>
                                <select id="city" class="form-control select2">
                                    <option style="font-size: 14px" value="show_all">Show All</option>
                                    {% for item in city_list %}
                                        <option value="{{item.id}}">{{item.city_name}}</option>
                                    {% endfor %}
                                </select>
                            </div>

                            <div class="col-lg-2">
                                <span>Pin-Code</span>
                                <select id="pin_code" class="form-control select2">
                                    <option style="font-size: 14px" value="show_all">Show All</option>
                                    {% for item in pincode_list %}
                                        <option value="{{item.correspond_pincode}}">{{item.correspond_pincode}}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>
                        <br>


                        <div class="row">
                            <div class="col-lg-2">
                                <span>Member/Associate</span>
                                <select id="member_associate" class="form-control select2">
                                    <option style="font-size: 14px" value="show_all">Show All</option>
                                    <option value="Member">Member</option>
                                    <option value="Associate">Associate</option>
                                </select>
                            </div>

                            <div class="col-lg-2">
                                <span>Legal Status</span>
                                <select id="legal_status" class="form-control select2">
                                    <option style="font-size: 14px" value="show_all">Show All</option>
                                    {% for item in legal_status_list %}
                                        <option value="{{item.id}}">{{item.description}}</option>
                                    {% endfor %}
                                </select>
                            </div>

                            <div class="col-lg-2">
                                <span>Payment Status</span>
                                <select id="payment_status" class="form-control select2">
                                    <option style="font-size: 14px" value="show_all">Show All</option>
                                    <option value="Confirmed">Confirmed</option>
                                    <option value="Online Pending">Online Pending</option>
                                    <option value="Offline Pending">Offline Pending</option>
                                    <option value="Failed">Failed</option>
                                    <option value="Deactivate">Deactivated</option>
                                </select>
                            </div>

                            <div class="col-lg-2">
                                <span>FY</span>
                                <select id="fy" class="form-control select2">
                                    <option style="font-size: 14px" value="show_all">Show All</option>
                                    <option style="font-size: 14px" value="2017-2018">2017-2018</option>
                                    {% for item in date_list %}
                                    <option style="font-size: 14px" value="{{item}}">{{item}}</option>
                                    {% endfor %}
                                </select>
                            </div>

                            <div class="col-lg-4">
                                <span>Turnover</span>
                                <div class="input-group">
                                    <input type="number" class="form-control"
                                           id="turnover_from" name="turnover_from" placeholder="From"
                                            onkeypress="return isDecimalNumber(event, this);">
                                    <span class="input-group-addon"> to </span>
                                    <input type="number" class="form-control"
                                           id="turnover_to" name="turnover_to" placeholder="To"
                                            onkeypress="return isDecimalNumber(event, this);">
                                </div>
                            </div>
                        </div>
                        <br>

                        <div class="row">
                            <div class="col-lg-3">
                                <span>Search</span>
                                <div class="input-group form-group">
                                <span class="input-group-btn">
                                    <span style=" height: 34px;"
                                          class="btn btn btn-default">
                                        <span class="fa fa-search"></span>
                                    </span>
                                </span>
                                    <input style=" font-size: 14px; " type="text"
                                           class="form-control " id="search_member_detail_text"
                                           placeholder="Search" name="search_member_detail_text">
                                </div>
                            </div>
                            <div class="col-lg-3">
                                <span>Payment Date</span>
                                <div class="input-group input-daterange custom-date-size">
                                    <input type="text" class="form-control validateRequired validateDate dateField "
                                           data-date="10/11/2012" data-date-format="dd/mm/yyyy" id="payment_from"
                                           name="payment_from" placeholder="From" readonly>
                                    <span class="input-group-addon"> to </span>
                                    <input type="text" class="form-control validateRequired validateDate dateField"
                                           data-date="10/11/2012" data-date-format="dd/mm/yyyy" id="payment_to"
                                           name="payment_to"
                                           placeholder="To" readonly>
                                </div>
                            </div>

                            <div class="col-lg-3">
                                <span>Acceptance Date</span>
                                <div class="input-group input-daterange custom-date-size">
                                    <input type="text" class="form-control validateRequired validateDate dateField "
                                           data-date="10/11/2012" data-date-format="dd/mm/yyyy" id="acceptance_from"
                                           name="acceptance_from" placeholder="From" readonly>
                                    <span class="input-group-addon"> to </span>
                                    <input type="text" class="form-control validateRequired validateDate dateField"
                                           data-date="10/11/2012" data-date-format="dd/mm/yyyy" id="acceptance_to"
                                           name="acceptance_to"
                                           placeholder="To" readonly>
                                </div>
                            </div>

                            <div class="col-lg-3">
                                <span>Receipt Date</span>
                                <div class="input-group input-daterange custom-date-size">
                                    <input type="text" class="form-control validateRequired validateDate dateField "
                                           data-date="10/11/2012" data-date-format="dd/mm/yyyy" id="receipt_from"
                                           name="receipt_from" placeholder="From" readonly>
                                    <span class="input-group-addon"> to </span>
                                    <input type="text" class="form-control validateRequired validateDate dateField"
                                           data-date="10/11/2012" data-date-format="dd/mm/yyyy" id="receipt_to"
                                           name="receipt_to"
                                           placeholder="To" readonly>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-lg-offset-7 col-lg-2">
                                <div style="color: #797979;">
                                    <a style="font-size: 16px; width: 100%;" type="button"
                                       class="btn done_btn" onclick="filter_member_detail_table()"
                                       href="#">Filter
                                    </a>
                                </div>
                            </div>

                            <div class="col-lg-3">
                                <div class="pull-right " style="color: #797979;">
                                    <a style="font-size: 16px; " type="button"
                                       class="btn done_btn " data-toggle="modal"
                                       href="/membershipapp/membership-form-admin/">Add New Members
                                        Details
                                    </a>
                                </div>
                            </div>
                        </div>
                        <hr class="hre">
                        <div class="portlet-body form">
                            <div class="row">
                                <div class="col-lg-12">
                                    <div class="portlet-body">
                                    {% if request.user.username != 'mandarg' %}
                                        <div class="actions">
                                            <div class="btn-group pull-right">
                                                <a class="btn red btn-outline btn-circle"
                                                   href="javascript:;"
                                                   data-toggle="dropdown">
                                                    <i class="fa fa-share"></i>
                                                    <span class="hidden-xs"> Tools </span>
                                                    <i class="fa fa-angle-down"></i>
                                                </a>
                                                <ul class="dropdown-menu pull-right"
                                                    id="members_details_table_tools">
                                                    <li>
                                                        <a href="javascript:;" data-action="0"
                                                           class="tool-action">
                                                            <i class="icon-printer"></i> Print</a>
                                                    </li>

                                                    <li>
                                                        <a href="javascript:;" data-action="2"
                                                           class="tool-action">
                                                            <i class="icon-doc"></i> PDF</a>
                                                    </li>
                                                    <li>
                                                        <a href="javascript:;" data-action="3"
                                                           class="tool-action">
                                                            <i class="icon-paper-clip"></i> Excel</a>
                                                    </li>
                                                    <li>
                                                        <a href="javascript:;" data-action="4"
                                                           class="tool-action">
                                                            <i class="icon-cloud-upload"></i> CSV</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                        {% endif %}
                                            <table class="table table-striped table-bordered table-hover table-checkable order-column"
                                               id="members_details_table">
                                            <thead>
                                            <tr>
                                                <th class="text-center">Sr. No</th>
                                                <th class="text-center">Date</th>
                                                <th class="text-center">F.Y.</th>
                                                <th>Memb/Asso #</th>
                                                <th width="10%" class="text-center">Co./Applicant Name</th>
                                                <th>Amt. Recd</th>
                                                <th>Amt. Due</th>
                                                <!-- <th>GST</th> -->
                                                <th>T.O (Crs)</th>
                                                <th>Profile</th>
                                                <th>Payment</th>
                                                <th class="text-center">Email ID</th>
                                                <th>Acceptance Date</th>
                                                <th>Receipt Date</th>
                                                <th>Payment Date</th>
                                                <th>Contact No.</th>
                                                <th>Soft Copy Certificate</th>
                                                <th >Hard Copy Certificate</th>
                                                <th>Download Proforma Invoice</th>
                                                <th>Send Renewal Letter</th>
                                                <th>Next FY Due</th>
                                                <th>Bk No.</th>
                                                <th>Status</th>
                                            </tr>
                                            </thead>
                                        </table>
                                    </div>
                                </div>
                                <!-- END FORM-->
                            </div>
                        </div>
                        <!-- END PORTLET-->
                    </div>
                </div>
            </div>
            <!-- END CONTENT BODY -->
        </div>
        <!-- END CONTENT -->
    </div>  <!-- END PORTLET-->
</div>
<!-- END CONTAINER -->

<div class="modal fade draggable-modal" id="delete_industry_details_modal" tabindex="-1" role="basic"
     aria-hidden="true">
    <div class="modal-dialog" style="width:35%;">
        <div class="modal-content">
            <div class="modal-header">
                Deactivate Industry Details
            </div>
            <input type="hidden" id="industry_id" name="industry_id" class="form-control"/>

            <div class="modal-body">
                <form action="index.html" class="form-horizontal form-row-seperated">
                    <div class="form-body">
                        <h4 class="text-center" id="deact_pro">Do you want to deactivate Industry Details ?</h4>
                    </div>
            </div>
            <div style="text-align:center !important;" class="modal-footer">
                <button type="button" onclick="inactive_industry_details()" class="btn green">Yes</button>
                <button type="button" class="btn green" data-dismiss="modal">No</button>

            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
</div>


<div class="modal fade draggable-modal" id="activate_industry_details_modal" tabindex="-1" role="basic"
     aria-hidden="true">
    <div class="modal-dialog" style="width:35%;">
        <div class="modal-content">
            <div class="modal-header">
                Re-activate Industry Details
            </div>
            <input type="hidden" id="activate_industry_id" name="activate_industry_id" class="form-control"/>

            <div class="modal-body">
                <form action="index.html" class="form-horizontal form-row-seperated">
                    <div class="form-body">
                        <h4 class="text-center" id="deact_pro">Do you want to re-activate Industry Details ?</h4>
                    </div>
            </div>
            <div style="text-align:center !important;" class="modal-footer">
                <button type="button" onclick="activate_industry_details()" class="btn green">Yes</button>
                <button type="button" class="btn green" data-dismiss="modal">No</button>

            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
</div>


<div class="modal fade draggable-modal" id="edit_industry_description_modal" tabindex="-1" role="basic"
     aria-hidden="true">
    <div class="modal-dialog" style="width:50%;">
        <div class="modal-content">
            <div class="modal-header">
                Edit Industry Details
            </div>
            <div class="modal-body">
                <form id="edit_industry_code" role="form" enctype="multipart/form-data" name="edit_industry_code"
                      method="POST">
                    <input type="hidden" id="industry_code_id" name="industry_code_id" class="form-control"/>

                    <div class="row">
                        <div class="col-md-2">
                            <label class="control-label">Code
                                <span class="required"> * </span>
                            </label>
                            <input id="edit_industry_code" name="edit_industry_code" class="form-control"/>
                            <label id="edit_industry_code_error" class="error" style="color:red; display:none;"></label>
                        </div>

                        <div class="col-md-10">
                            <label class="control-label">Description
                                <span class="required"> * </span>
                            </label>
                            <input id="edit_industry_descriptions" name="edit_industry_descriptions"
                                   class="form-control"/>
                            <label id="edit_industry_descriptions_error" class="error"
                                   style="color:red; display:none;"></label>
                        </div>

                    </div>


                    <div class="row" style="  margin-top: 30px;">

                    </div>

                </form>
                <div style="text-align:center !important;" class="modal-footer">
                    <div class="col-xs-12 text-right">

                        <button type="button" class="btn btn-outline grey_color "
                                onclick="location.href = '/backofficeapp/industry-details/';">Cancel
                        </button>
                        <button type="button" id="edit-countinue" class="btn btn-outline done_btn">Save</button>
                    </div>

                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
</div>


<div class="modal fade draggable-modal" id="active_modal" role="basic" aria-hidden="true">
    <div class="modal-dialog" style="width:35%;">
        <div class="modal-content">
            <div class="modal-header text-center">


            </div>
            <div class="modal-body">
                <form action="index.html" class="form-horizontal form-row-seperated">
                    <div class="form-body">
                        <h4 class="text-center">Industry Details re-activated successfully</h4>
                    </div>
                    <div style="text-align:center !important;" class="modal-footer">
                        <button type="button" onclick="location.reload()" class="btn green" data-dismiss="modal">OK
                        </button>
                    </div>
            </div>
        </div>
    </div>
</div>


<div class="modal fade draggable-modal" id="success_modal" tabindex="-1" role="basic" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">

            <div class="modal-body">
                <form action="index.html" class="form-horizontal form-row-seperated">
                    <div class="form-body">
                        <h4 class="text-center">Industry Details Updated Successfully</h4>
                    </div>
                    <div style="text-align:center !important;" class="modal-footer">
                        <button type="button" class="btn green"
                                onclick="location.href = '/backofficeapp/industry-details/';" data-dismiss="modal">OK
                        </button>

                    </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
</div>


<div class="modal fade draggable-modal" id="deleteMemberModal" tabindex="-1" role="basic"
     aria-hidden="true">
    <div class="modal-dialog" style="width:35%;">
        <div class="modal-content">
            <div class="modal-header">
                Deactivate Membership
            </div>
            <input type="hidden" id="member_id" name="member_id" class="form-control"/>

            <div class="modal-body">
                <form action="index.html" class="form-horizontal form-row-seperated">
                    <div class="form-body">
                        <h4 class="text-center" id="deact_pro">Do you want to Deactivate Membership ?</h4>
                    </div>
                </form>
            </div>
            <div style="text-align:center !important;" class="modal-footer">
                <button type="button" onclick="delete_membership()" class="btn green">Yes</button>
                <button type="button" class="btn green" data-dismiss="modal">No</button>

            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
</div>

<div class="modal fade draggable-modal" id="remove_user" tabindex="-1" role="basic" aria-hidden="true">
    <div class="modal-dialog" style="width:35%;">
        <div class="modal-content">
            <div class="modal-header text-center">
            </div>
            <div class="modal-body">
                <form action="index.html" class="form-horizontal form-row-seperated">
                    <div class="form-body">
                        <h4 class="text-center" id="pro_deact">Membership deactivated successfully</h4>
                    </div>
                    <div style="text-align:center !important;" class="modal-footer">
                        <button type="button" onclick="filter_member_detail_table()" class="btn green" data-dismiss="modal">OK
                        </button>


                    </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
</div>

<div class="modal fade draggable-modal" id="reactivateMemberModal" tabindex="-1" role="basic"
     aria-hidden="true">
    <div class="modal-dialog" style="width:35%;">
        <div class="modal-content">
            <div class="modal-header">
                Deactivate Membership
            </div>
            <input type="hidden" id="active_member_id" name="active_member_id" class="form-control"/>

            <div class="modal-body">
                <form action="index.html" class="form-horizontal form-row-seperated">
                    <div class="form-body">
                        <!--<h4 class="text-center" id="deact_pro">Do you want to Reactivate Membership ?</h4>-->
                        <div class="row">
                            <div class="col-md-12">
                                <h4 class="text-center">Is it Re-Association ?</h4>
                            </div>
                            <div class="col-md-offset-3 col-md-3 input-radio">
                                <input class="myRadioClass" type="radio" name="re_associate_status" id="yes" value="Yes">
                                <label class="control-label" for="yes">Yes</label>
                            </div>
                            <div class="col-md-3 input-radio">
                                <input class="myRadioClass" type="radio" name="re_associate_status" id="no" value="No" checked>
                                <label class="control-label" for="no">No</label>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div style="text-align:center !important;" class="modal-footer">
                <button type="button" onclick="reactivate_membership()" class="btn green">Submit</button>
                <button type="button" class="btn green" data-dismiss="modal">Cancel</button>

            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
</div>

<!-- Pro-Forma Invoice Year-->
<div class="modal fade draggable-modal" id="proforma_invoice_modal" tabindex="-1" role="basic"
     aria-hidden="true">
    <div class="modal-dialog" style="width:35%;">
        <div class="modal-content">
            <div class="modal-header">
                Pro-Forma Invoice
            </div>
            <div class="modal-body">
                <form class="form-horizontal form-row-seperated">
                    <div class="form-body">
                        <input type="hidden" id="proforma_invoice_member_id" name="proforma_invoice_member_id" class="form-control"/>
                        <div class="row">
                            <div class="col-md-6">
                                <h4 style="text-align: center; margin-top: 5px;">Current Year:</h4>
                            </div>
                            <div class="col-md-6">
                                <select id="current_year" class="form-control" tabindex="-1" aria-hidden="true"></select>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div style="text-align:center !important;" class="modal-footer">
                <button type="button" onclick="download_proforma_invoice()" class="btn green">Submit</button>
                <button type="button" class="btn green" data-dismiss="modal">Cancel</button>

            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
</div>

<!--proforma-Mail_send-->
<!-- Pro-Forma Invoice Year-->
<div class="modal fade draggable-modal" id="proforma_invoice_modal_email" tabindex="-1" role="basic"
     aria-hidden="true">
    <div class="modal-dialog" style="width:35%;">
        <div class="modal-content">
            <div class="modal-header">
                Pro-Forma Invoice
            </div>
            <div class="modal-body">
                <form class="form-horizontal form-row-seperated">
                    <div class="form-body">
                        <input type="hidden" id="proforma_invoice_member_id_email" name="proforma_invoice_member_id_email" class="form-control"/>
                        <div class="row">
                            <div class="col-md-6">
                                <h4 style="text-align: center; margin-top: 5px;">Current Year:</h4>
                            </div>
                            <div class="col-md-6">
                                <select id="current_year_email" class="form-control" tabindex="-1" aria-hidden="true"></select>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div style="text-align:center !important;" class="modal-footer">
                <button type="button" onclick="download_proforma_invoice_email()" class="btn green">Submit</button>
                <button type="button" class="btn green" data-dismiss="modal">Cancel</button>

            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
</div>

<div class="modal fade draggable-modal" id="activate_user" tabindex="-1" role="basic" aria-hidden="true">
    <div class="modal-dialog" style="width:35%;">
        <div class="modal-content">
            <div class="modal-header text-center">
            </div>
            <div class="modal-body">
                <form action="index.html" class="form-horizontal form-row-seperated">
                    <div class="form-body">
                        <h4 class="text-center" id="pro_deact">Membership Reactivated successfully</h4>
                    </div>
                    <div style="text-align:center !important;" class="modal-footer">
                        <button type="button" onclick="filter_member_detail_table()" class="btn green" data-dismiss="modal">OK
                        </button>


                    </div>
                </form>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
</div>


<!-- BEGIN FOOTER -->
<div class="page-footer">
    <div class="page-footer-inner"> 2018 © Bynry Technologies

    </div>
    <div class="scroll-to-top">
        <i class="icon-arrow-up"></i>
    </div>
</div>
</div>
<!-- END FOOTER -->

{% include 'backoffice/base_js.html' %}
<!-- END THEME LAYOUT SCRIPTS -->

<script type="text/javascript">

    $("#member_anchor").addClass("tab-active");
    $("#member_nav").addClass("active");
    $("#member_icon").addClass("icon-active");
    $("#member_active").css("display", "block");
    $(".sel2").select2({
        width: '100%'
    })

    $(document).ready(function () {
        $("#toggle_menu_bar").trigger("click");
        var business_nature = "show_all";
        var iso = "show_all";
        var scale = "show_all";
        var state = "show_all";
        var city = "show_all";
        var pincode = "show_all";
        var mem_associate = "show_all";
        var legal_status = "show_all";
        var payment_status = "show_all";
        var fy = "show_all";
        var turnover_from = "";
        var turnover_to = "";
        var payment_from = "";
        var payment_to = "";
        var acceptance_from = "";
        var acceptance_to = "";
        var receipt_from = "";
        var receipt_to = "";
        request_member_detail_table(business_nature,iso,scale,state,city,pincode,mem_associate,legal_status,payment_status,fy,
        turnover_from,turnover_to,payment_from,payment_to,acceptance_from,acceptance_to,receipt_from,receipt_to);
    });


    function request_member_detail_table(business_nature,iso,scale,state,city,pincode,mem_associate,legal_status,payment_status,fy,
        turnover_from,turnover_to,payment_from,payment_to,acceptance_from,acceptance_to,receipt_from,receipt_to){
        var url = '/backofficeapp/get-members-details-datatable/?business_nature='+business_nature+'&iso='+iso+'&scale='+scale+'&state='+state+'&city='+city+'&pincode='+pincode+'&mem_associate='+mem_associate+'&legal_status='+legal_status+'&payment_status='+payment_status+'&fy='+fy+'&turnover_from='+turnover_from+'&turnover_to='+turnover_to+'&payment_from='+payment_from+'&payment_to='+payment_to+'&acceptance_from='+acceptance_from+'&acceptance_to='+acceptance_to+'&receipt_from='+receipt_from+'&receipt_to='+receipt_to+'&search_text='+$("#search_member_detail_text").val()
        var table = $('#members_details_table');
        var oTable = table.dataTable({
            "processing": true,
            "serverSide": true,
            "destroy": true,
            "ajax": url,
            "searching": true,
            "Filter": true,
            "ordering": false,
            "paging": true,
            "columnDefs": [
                {"targets": [4,10,11], "orderable": false},                
                {"className": "text-center", "targets": [0,1,2,3,5,6,7,8,9,12,13,14,15,16,17,18], "orderable": false},
            ],
            buttons: [
                {extend: 'print', className: 'btn dark btn-outline',
                    exportOptions: { columns: [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15] },
                },
                {extend: 'copy', className: 'btn red btn-outline',
                    exportOptions: { columns: [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15] },
                },
                {extend: 'pdf', className: 'btn green btn-outline',
                    exportOptions: { columns: [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15] },
                },
                {extend: 'excel', className: 'btn yellow btn-outline',
                    exportOptions: { columns: [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15] },
                },
                {extend: 'csv', className: 'btn purple btn-outline',
                    exportOptions: { columns: [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15] },
                },
                {extend: 'colvis', className: 'btn dark btn-outline', text: 'Columns'}
            ],

            responsive: false,

            "order": [[0, 'asc']],

            "lengthMenu": [ [10, 25, 50, 100, -1], [10, 25, 50, 100, "All"] ],

            "pageLength": 10,
        });

        $(".dataTables_filter").hide();
        
        // if ($("#search_member_detail_text").val().length >= 4){
            // oTable.fnFilter($("#search_member_detail_text").val()).draw();            
        //     oTable.DataTable().search($("#search_member_detail_text").val()).draw();
        // }            

        $("#search_member_detail_text").keyup(function() {
            if ($("#search_member_detail_text").val().length >= 4){
                oTable.fnFilter($("#search_member_detail_text").val());                
            }            
        });

        $('#members_details_table_tools > li > a.tool-action').on('click', function() {
            var action = $(this).attr('data-action');
            oTable.DataTable().button(action).trigger();
        });
    }

    // Filter Table
    function filter_member_detail_table(){
        var business_nature = $("#business_nature").val();
        var iso = $("#iso").val();
        var scale = $("#scale").val();
        var state = $("#state").val();
        var city = $("#city").val();
        var pincode = $("#pin_code").val();
        var mem_associate = $("#member_associate").val();
        var legal_status = $("#legal_status").val();
        var payment_status = $("#payment_status").val();
        var fy = $("#fy").val();
        var turnover_from = $("#turnover_from").val();
        var turnover_to = $("#turnover_to").val();
        var payment_from = $("#payment_from").val();
        var payment_to = $("#payment_to").val();
        var acceptance_from = $("#acceptance_from").val();
        var acceptance_to = $("#acceptance_to").val();
        var receipt_from = $("#receipt_from").val();
        var receipt_to = $("#receipt_to").val();

        request_member_detail_table(business_nature,iso,scale,state,city,pincode,mem_associate,legal_status,payment_status,fy,
        turnover_from,turnover_to,payment_from,payment_to,acceptance_from,acceptance_to,receipt_from,receipt_to);
    }

    $("#payment_status").change(function(e){
        filter_member_detail_table();
    });

    // Check for Decimal
    function isDecimalNumber(evt, obj){
        var charCode = (evt.which) ? evt.which : event.keyCode
        var value = obj.value;
        var dotcontains = value.indexOf(".") != -1;
        if (dotcontains)
            if (charCode == 46)
                return false;
            if (charCode == 46)
                return true;
        if (charCode > 31 && (charCode < 48 || charCode > 57))
            return false;
        return true;
    }


    function editIndustryDescriptionModal(category_code_id) {
        $("#edit_industry_description_modal").modal('show');

        <!--$.ajax({-->
        <!--type: "GET",-->
        <!--url : '/backofficeapp/show-membership-details/',-->
        <!--data : {-->
        <!--'category_code_id':category_code_id-->
        <!--},-->

        <!--success: function (response) {-->
        <!--if (response.success == "true") {-->
        <!--$('#category_code_id').val(response.membserhipDetails.category_code_id);-->
        <!--$('#edit_category_code').val(response.membserhipDetails.membership_code);-->
        <!--$('#edit_category_descriptions').val(response.membserhipDetails.membership_category);-->

        <!--}-->
        <!--},-->
        <!--error : function(response){-->
        <!--alert("_Error");-->
        <!--}-->
        <!--});-->
    }
    function change_data() {

        sort_var = $('#sortby :selected').val();

        data = '/get-data/?sort_var=' + sort_var

        $('#industry_details_table').dataTable({
            "bDestroy": true,


            "order": [
                [0, 'asc']
            ],

            "ajax": data,
            "columns": [
                {"data": "user_name", "sClass": "text-left"},
                {"data": "usre_email_id"},
                {"data": "user_contact_no"},
                {"data": "role_id"},
                {"data": "status"},
                {"data": "actions", "sClass": "text-center"},
            ],


        });
    }

    var xyz;
    function delete_user_detail(id, name) {
        xyz = id;
        nm = name
        //$('#deact_pro').text("Do you want to Deactivate "+nm+ " user profile ? ");
        //$('#pro_deact').text("User profile  "+nm+ " Deactivated successfully");
        $("#delete_user").modal('show');
    }

    function reactivate_user(id) {

        xyz = id;
        $("#reactivate_user").modal('show');
    }

    function reactivateMemberModal(id) {
        $("#active_member_id").val(id);
        $("#reactivateMemberModal").modal('show');
    }
    function reactivate_membership() {
        var active_member_id = $('#active_member_id').val();
        $.ajax({
            type: 'POST',
            url: '/backofficeapp/activate-membership/',
            data: {'active_member_id': active_member_id, 're_association_status': $('input[name=re_associate_status]:checked').val()},
            success: function (response) {
                if (response.success == 'true') {
                    $("#reactivateMemberModal").modal('hide');
                    $("#activate_user").modal('show');
                }
                if (response.success == 'false') {
                    alert(response.message);
                }
            },
            beforeSend: function () {
                $("#processing").css('display', 'block');
            },
            complete: function () {
                $("#processing").css('display', 'none');
            },
            error: function (response) {
                console.log(response);
                alert('error');
            },
        });
    }

    function deleteMemberModal(id) {
        $("#member_id").val(id);
        $("#deleteMemberModal").modal('show');
    }

    function delete_membership() {
        var member_id = $('#member_id').val();
        $.ajax({
            type: 'POST',
            url: '/backofficeapp/delete-membership/',
            data: {'member_id': member_id},
            success: function (response) {                
                if (response.success == 'true') {
                    $("#deleteMemberModal").modal('hide');
                    $("#remove_user").modal('show');
                }
                if (response.success == 'false') {
                    alert(response.message);
                }
            },
            beforeSend: function () {
                $("#processing").css('display', 'block');
            },
            complete: function () {
                $("#processing").css('display', 'none');
            },
            error: function (response) {
                console.log(response);
                alert('error');
            },
        });
    }



    function checkUserName(username) {
        user_name = $(username).val()
        var regex = /^[a-zA-Z0-9]+$/;
        if ($(username).val() != '') {
            $(username).parent().children('.error').css("display", "none");
            if (regex.test(user_name)) {
                //alert('regex if');
                $(username).parent().children('.error').css("display", "none");
                return true;
            }
            else {
                //alert('regex else');
                //alert($(username).parent().children('.error').html());
                $(username).parent().children('.error').css("display", "block");
                $(username).parent().children('.error').text("No spaces and special characters allowed");
                return false;
            }
            //return true;
        } else {
            $(username).parent().children('.error').css("display", "block");
            $(username).parent().children('.error').text("Please enter username");
            return false;
        }
    }


    function validateData() {
        if (checkUserName("#username") && checkContactNo("#contact_no") && checkEmail("#email") && checkRole("#user_role") && checkPassword("#password") && checkRePassword("#re-password")) {
            return true;
        }
        return false;
    }


    function deleteIndustryDetailModal(industry_code_id) {
        $("#delete_industry_details_modal").modal('show');

        $.ajax({
            type: "GET",
            url: '/backofficeapp/show-industry-details/',
            data: {
                'industry_code_id': industry_code_id
            },

            success: function (response) {
                if (response.success == "true") {
                    $('#industry_id').val(response.industryDetails.industry_code_id);
                    //$('#edit_industry_code').val(response.membserhipDetails.membership_code);
                    //$('#edit_industry_descriptions').val(response.membserhipDetails.membership_category);

                }
            },
            error: function (response) {
                alert("_Error");
            }
        });
    }

    function inactive_industry_details() {
        var industry_id = $('#industry_id').val();
        $.ajax({
            type: 'POST',
            url: '/backofficeapp/delete-industry-details/',
            data: {'industry_id': industry_id},
            success: function (response) {
                if (response.success == 'true') {
                    $("#delete_industry_details_modal").modal('hide');
                    $("#remove_user").modal('show');
                }
                if (response.success == 'false') {
                    alert(response.message);
                }
            },
            beforeSend: function () {
                $("#processing").css('display', 'block');
            },
            complete: function () {
                $("#processing").css('display', 'none');
            },
            error: function (response) {
                console.log(response);
                alert('error');
            },
        });
    }

    function activateIndustryDetailModal(industry_code_id) {
        $("#activate_industry_details_modal").modal('show');

        $.ajax({
            type: "GET",
            url: '/backofficeapp/show-industry-details/',
            data: {
                'industry_code_id': industry_code_id
            },

            success: function (response) {
                if (response.success == "true") {
                    $('#activate_industry_id').val(response.industryDetails.industry_code_id);

                }
            },
            error: function (response) {
                alert("_Error");
            }
        });
    }

    function activate_industry_details() {
        var industry_id = $('#activate_industry_id').val();
        $.ajax({
            type: 'POST',
            url: '/backofficeapp/activate-industry-details/',
            data: {'industry_id': industry_id},
            success: function (response) {
                if (response.success == 'true') {
                    $("#activate_industry_details_modal").modal('hide');
                    $("#active_modal").modal('show');
                }
                if (response.success == 'false') {
                    alert(response.message);
                }
            },
            beforeSend: function () {
                $("#processing").css('display', 'block');
            },
            complete: function () {
                $("#processing").css('display', 'none');
            },
            error: function (response) {
                console.log(response);
                alert('error');
            },
        });
    }


    function isNumberKey(evt) {
        var charCode = (evt.which) ? evt.which : event.keyCode
        if (charCode > 31 && (charCode < 48 || charCode > 57 || charCode == 43 || charCode == 45 ))
            return false;
        return true;
    }

    function validateFloatKeyPresss(el, evt) {
        var charCode = (evt.which) ? evt.which : event.keyCode;
        var number = el.value.split('+');
        var number1 = el.value.split('-');
        if (charCode != 45 && charCode != 43 && charCode > 31 && (charCode < 48 || charCode > 57)) {
            return false;
        }
        //just one dot
        if (number.length > 1 && charCode == 43) {
            return false;
        }
        if (number1.length > 1 && charCode == 45) {
            return false;
        }
        return true;
    }


    function validateDataEditCategory() {
        if (checkindustry_code("#edit_industry_code") & checkindustry_descriptions("#edit_industry_descriptions")) {
            return true;
        }
        return false;
    }


    function checkindustry_code(industry_code) {

        industry_code = $(edit_industry_code).val();
        var namePattern = /^\d+$/;

        if (industry_code != '' & namePattern.test(industry_code)) {

            $('#edit_industry_code_error').css("display", "none");
            return true;
        } else {
            $('#edit_industry_code_error').css("display", "block");
            $('#edit_industry_code_error').text("Please enter valid Code");
            return false;
        }
    }
    function checkindustry_descriptions(edit_industry_descriptions) {
        industry_descriptions = $(edit_industry_descriptions).val()
        var namePattern = /[A-Za-z]$/;
        if (industry_descriptions != '' & namePattern.test(industry_descriptions)) {
            $('#edit_industry_descriptions_error').css("display", "none");
            return true;
        } else {
            $('#edit_industry_descriptions_error').css("display", "block");
            $('#edit_industry_descriptions_error').text("Please enter valid Industry Details");
            return false;
        }
    }

    function editIndustryDescriptionModal(industry_code_id) {
        $("#edit_industry_description_modal").modal('show');

        $.ajax({
            type: "GET",
            url: '/backofficeapp/show-industry-details/',
            data: {
                'industry_code_id': industry_code_id
            },

            success: function (response) {
                if (response.success == "true") {
                    $('#industry_code_id').val(response.industryDetails.industry_code_id);
                    $('#edit_industry_code').val(response.industryDetails.industry_code);
                    $('#edit_industry_descriptions').val(response.industryDetails.industry_category);

                }
            },
            error: function (response) {
                alert("_Error");
            }
        });
    }

    $("#edit-countinue").click(function (event) {


        if (validateDataEditCategory()) {


            var formData = new FormData();

            formData.append("industry_code_id", $('#industry_code_id').val());
            formData.append("edit_industry_code", $('#edit_industry_code').val());
            formData.append("edit_industry_descriptions", $('#edit_industry_descriptions').val());


            $.ajax({

                type: "POST",
                url: '/backofficeapp/edit-industry-details/',
                data: formData,
                cache: false,
                processData: false,
                contentType: false,
                success: function (response) {

                    if (response.success == 'true') {
                        $("#edit_industry_description_modal").modal('hide');
                        $("#success_modal").modal('show');
                    }
                    if (response.success == "false") {
                        $("#error-modal").modal('show');
                    }
                },
                beforeSend: function () {
                    $("#processing").css('display', 'block');
                },
                complete: function () {
                    $("#processing").css('display', 'none');
                },
                error: function (response) {
                    alert("_Error");
                }
            });
        }

    });

    // Open Pro-Forma Invoice Modal
    function show_proforma_invoice_modal(member_id){
        $("#proforma_invoice_member_id").val(member_id);
        var current_year = new Date().getFullYear();
        var prev_year_item = (current_year - 1).toString() + '-' + current_year.toString();
        var current_year_item = current_year.toString() + '-' + (current_year + 1).toString();
        var next_year_item = (current_year + 1).toString() + '-' + (current_year + 2).toString();
        $("#current_year").html('');
        $("#current_year").append('<option value='+prev_year_item.replace('-', '_')+'>'+prev_year_item+'</option>');
        $("#current_year").append('<option value='+current_year_item.replace('-', '_')+'>'+current_year_item+'</option>');
        $("#current_year").append('<option value='+next_year_item.replace('-', '_')+'>'+next_year_item+'</option>');
        $("#current_year").val(current_year_item.replace('-', '_')).change();
    }


    // Download Pro-Forma Invoice PDF
    function download_proforma_invoice(){
        $('#proforma_invoice_modal').modal('hide');
        url = '/backofficeapp/download-proforma-invoice/'+$("#proforma_invoice_member_id").val()+'/'+$("#current_year").val();
        window.open(url, '_blank');
    }


        // Open Pro-Forma Invoice Modal Email
     function show_proforma_invoice_modal_email(member_id){
        $("#proforma_invoice_member_id_email").val(member_id);
        var current_year_email = new Date().getFullYear();
        var prev_year_item = (current_year_email - 1).toString() + '-' + current_year_email.toString();
        var current_year_item = current_year_email.toString() + '-' + (current_year_email + 1).toString();
        var next_year_item = (current_year_email + 1).toString() + '-' + (current_year_email + 2).toString();
        $("#current_year_email").html('');
        $("#current_year_email").append('<option value='+prev_year_item.replace('-', '_')+'>'+prev_year_item+'</option>');
        $("#current_year_email").append('<option value='+current_year_item.replace('-', '_')+'>'+current_year_item+'</option>');
        $("#current_year_email").append('<option value='+next_year_item.replace('-', '_')+'>'+next_year_item+'</option>');
        $("#current_year_email").val(current_year_item.replace('-', '_')).change();
    }

        // Download Pro-Forma Invoice PDF Email
     function download_proforma_invoice_email(){
        $('#proforma_invoice_modal_email').modal('hide');
        url = '/backofficeapp/send-pi-through-email-to-user/'+$("#proforma_invoice_member_id_email").val()+'/'+$("#current_year_email").val();
        window.open(url, '_blank');
    }

    // Open Member Payment Detail Page
    function viewPaymentModal(member_id){
        url = '/backofficeapp/open-member-payment/?member_id='+member_id;
        window.open(url, '_blank');
    }

    // Open Edit Member Form
    function editMemberModal(member_id){
        url = '/backofficeapp/show-edit-member-form/?member_id='+member_id;
        window.open(url, '_blank');
    }

    // Open Renew Screen
    function viewRenewScreen(user_id){
        url = '/backofficeapp/show-renew-member-form/?user_id='+user_id;
        window.open(url, '_blank');
    }


</script>

</body>
</html>