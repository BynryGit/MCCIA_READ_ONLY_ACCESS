<!DOCTYPE html>

<html lang="en">

<!-- BEGIN HEAD -->
{% load staticfiles %}

<head>
    <meta charset="utf-8"/>
    <title>MCCIA | Media </title>
    {% include 'backoffice/base_css.html' %}


</head>
<!-- END HEAD -->

<style type="text/css">
.datepicker.dropdown-menu{
margin-left: -122px;
}

.dropzone .dz-default.dz-message {
            width: 283px;
            height: 159px;
            margin-left: -141px;
}

.dropzone .dz-preview,
.dropzone-previews .dz-preview {
      background: rgba(255, 255, 255, 0.8);
      position: relative;
      display: inline-block;
      margin: 4px;
      vertical-align: top;
      border: 1px solid #acacac;
      padding: 6px 6px 6px 6px;
  }

#my-active-dropzone {
      border: 3px dashed black !important;
      min-height: 224px !important;
      background: #ffffff;
}

.dropzone .dz-preview .dz-details img,
.dropzone-previews .dz-preview .dz-details img {
      position: absolute;
      top: 0px;
      left: 0;
      width: 100% !important;
      height: 100% !important;
}

#my-awesome-dropzone-3 {
      border: 3px dashed black !important;
      min-height: 224px !important;
      background: #ffffff;
}

 .dropzone .dz-preview,
 .dropzone-previews .dz-preview {
      margin: 3px !important;
  }
</style>



<body class="page-header-fixed page-sidebar-closed-hide-logo page-container-bg-solid">
<!-- BEGIN HEADER -->
<div id="processing" style="display:none;">
    <div id="loading">
        <img src="{% static 'assets/loading-bars.gif' %}" style="height : 100px;">

    </div>
</div>
<!-- BEGIN HEADER -->
<div class="page-header navbar navbar-fixed-top">
    <!-- BEGIN HEADER INNER -->
    <div class="page-header-inner ">
        <!-- BEGIN LOGO -->
        <div class="page-logo">
            <a href="index.html">
                <img src="{% static 'assets/MCCIA-logo.png' %}" alt="logo"
                     class="logo-default"/> </a>
            <div class="menu-toggler sidebar-toggler">
                <!-- DOC: Remove the above "hide" to enable the sidebar toggler button on header -->
            </div>
        </div>
        <!-- END LOGO -->
        <!-- BEGIN RESPONSIVE MENU TOGGLER -->
        <a href="javascript:;" class="menu-toggler responsive-toggler" data-toggle="collapse"
           data-target=".navbar-collapse"> </a>
        <!-- END RESPONSIVE MENU TOGGLER -->
        <!-- BEGIN PAGE TOP -->
        <div class="page-top">
            <!-- BEGIN TOP NAVIGATION MENU -->
            <div class="top-menu">
                <ul class="nav navbar-nav pull-right">
                    <li class="dropdown dropdown-user">
                        <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown"
                           data-close-others="true">
                            <!-- <img alt="" class="img-circle" src="{% static 'assets/layouts/layout2/img/avatar3_small.jpg" /> -->
                            <span class="username username-hide-on-mobile"> {{ request.session.login_user }} </span>
                            <i class="fa fa-angle-down"></i>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-default">
                            <li>
                                <a href="/edit-profile/?user_id={{request.session.login_user}}">
                                    <i class="fa fa-user" aria-hidden="true"></i> My Profile </a>
                            </li>
                            <li>
                                <a href="/log-out/">
                                    <i class="icon-key"></i> Log Out </a>
                            </li>
                        </ul>
                    </li>
                    <!-- END USER LOGIN DROPDOWN -->
                </ul>
            </div>
            <!-- END TOP NAVIGATION MENU -->
        </div>
        <!-- END PAGE TOP -->
    </div>
    <!-- END HEADER INNER -->
</div>
<!-- END HEADER -->

<!-- BEGIN HEADER & CONTENT DIVIDER -->
<div class="clearfix"></div>
<!-- END HEADER & CONTENT DIVIDER -->


<!-- BEGIN CONTAINER -->
<div class="page-container">
    <!-- BEGIN SIDEBAR -->
    <div class="page-sidebar-wrapper">
        <div class="page-sidebar navbar-collapse collapse">
            {% include 'backoffice/membership/side-panel.html' %}
        </div>
    </div>
    <!-- END SIDEBAR -->


    <!-- BEGIN CONTENT -->
    <div class="page-content-wrapper">
        <!-- BEGIN CONTENT BODY -->
        <div class="page-content">


            <div class="row">
                <div class="col-lg-12">
                    <div class="portlet light  ">

                        <div class="page-bar">
                            <ul class="page-breadcrumb">
                                <li>
                                    <span style="color: #3eb199;font-size: 16px;"> Media </span>
                                    <i class="fa fa-angle-right"></i>
                                </li>
                                <li>
                                    <span style="color: #00448b;font-size: 16px;">Print Media</span>
                                </li>
                            </ul>
                        </div>
                        
<hr class="hre">


<div class="row">
     <div class="col-md-12">
         <label for="sponsor_banner">Print Media (Max 300KB)</label>
         <div class="form-group col-lg-12 col-md-12" id="sponsor_banner_div1">
             <div class="dropzone" style=" min-height: 70px; border-color: #e4e5e7 !important; " id="my-awesome-dropzone-3"><span class="txt_dropzone3" style="text-align: center; float: left;">Click or drag and drop to upload documents</span>
             </div>
             <input type="hidden" class="form-control" id="attachment" name="attachments">
             <input type="hidden" class="form-control" id="attachments" name="attachment">
         </div>
         <label id="error_dropzone" style="color:red; display:none; font-size: 12px;"></label>
     </div>	        
                                    
  </div>                        

                        
                        <!-- END PORTLET-->
                    </div>
                </div>
            </div>
            <!-- END CONTENT BODY -->
        </div>
        <!-- END CONTENT -->
    </div>  <!-- END PORTLET-->
</div>
<!-- END CONTAINER -->


<!-- BEGIN FOOTER -->
<div class="page-footer">
    <div class="page-footer-inner"> 2018 Â© Bynry Technologies

    </div>
    <div class="scroll-to-top">
        <i class="icon-arrow-up"></i>
    </div>
</div>
</div>
<!-- END FOOTER -->

{% include 'backoffice/base_js.html' %}
<!-- END THEME LAYOUT SCRIPTS -->
<script src="{% static 'backoffice/assets/pages/scripts/dropzone1.js' %}"></script>

<script type="text/javascript">

$("#media_anchor").addClass("tab-active");
$("#media_nav").addClass("active");
$("#media_icon").addClass("icon-active");
$("#media_active").css("display","block");
$("#media_nav").addClass("active");




////////////////////////////////// NEW DROPZONE ///////////////////////////
var uploaded_file_mb = 0;
var uploaded_file1_mb = 0;
var uploaded_file2_mb = 0;
var doc_length = 0
Dropzone.options.myAwesomeDropzone3 = {
    autoProcessQueue: true,
    uploadMultiple: true,
    paramName: "file",
    //maxFiles: 10,
    maxFilesize: 1.4,
    method: 'post',
    parallelUploads: 1,
    url: '/sitemedia/printmedia/',
    dictDefaultMessage: "Drop or Browse up to 10 images (1MB or higher in size)",
    addRemoveLinks: true,
    acceptedFiles: "",
    acceptedFiles: "image/jpeg,image/png,image/gif,.pdf,.PDF",
    dictInvalidFileType: 'This file type is not supported.',
    dictMaxFilesExceeded: "You can not upload more than 10 images.",

    init: function() {
        var myDropzone = this;
        var reordered_array = new Array();
        var temp_image_files = new Array();
        this.on("sending", function() {
            return false;
        });     

        this.on("addedfile", function(file, response) {
            $(".txt_dropzone3").text("");
            if (this.files.length) {
                var i, len, pre;
                for (i = 0, len = this.files.length; i < len - 1; i++) {
                    if (this.files[i].name == file.name && this.files[i].size == file.size && this.files[i].lastModifiedDate.toString() == file.lastModifiedDate.toString()) {
                        this.removeFile(file);
                        //return (pre = file.previewElement) != null ? pre.parentNode.removeChild(file.previewElement) : void 0;
                    }
                }
            }
            temp_image_files.push(file);
        });

        this.on("success", function(files, response) {
            doc_length = doc_length + 1;
            $('#attachment').val($('#attachment').val() + "," + response.attachid);
            $('a .dz-remove').attr('href', '/remove-advert-image/?image_id=' + response.attachid);
            reordered_array.push(response.attachid);
            $('#attachment').val(reordered_array);
            $('#attachments').val(reordered_array);
        });

        this.on("removedfile", function(file) {
            deleting_image_id = reordered_array[temp_image_files.indexOf(file)];
            $.ajax({
                url: "/sitemedia/printmedia/?image_id=" + deleting_image_id,
                success: function(result) {
                    doc_length = doc_length - 1;
                    arr = $('#attachment').val();
                    arr = arr.split(',');
                    console.log('Before Id Remove : ' + arr);
                    arr = jQuery.grep(arr, function(value) {
                        return value != deleting_image_id;
                    });
                    console.log('After Id Remove : ' + arr);
                    $('#attachment').val(arr);
                }
            });
            arr = $('#attachments').val();
            arr = arr.split(',');
            arr = jQuery.grep(arr, function(value) {
                return value != deleting_image_id;
            });

            $('#attachments').val(arr);
            var index = myDropzone.files.length;
            var temp_image_id = reordered_array[temp_image_files.indexOf(file)];

            reordered_array = jQuery.grep(reordered_array, function(value) {
                return value != temp_image_id;
            });

            temp_image_files = jQuery.grep(temp_image_files, function(value) {
                return value != file;
            });
            $('#attachments').val(reordered_array);
            if (myDropzone.files.length == 0) {
                $(".txt_dropzone3").text("Click or drag and drop to upload documents");
            }
        });

        this.on("maxfilesexceeded", function(file) {
            this.removeFiles(file);
            $('#lbl_upl').css("color", "red");
        });

        function getTotalPreviousUploadedFilesSize(bytesSent) {
            var totalSize = 0;
            var image_space = bytesSent;
            $("#image_space").val(image_space);
        }
    }
}

	
</script>

</body>
</html>